<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Lab v5 - Final</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { background-color: #f0f2f5; font-family: 'Segoe UI', sans-serif; overflow-x: hidden; }
        .swipe-card { transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 0.4s ease; }
        .slide-out-left { transform: translateX(-150%) rotate(-30deg) !important; opacity: 0; }
        .slide-out-right { transform: translateX(150%) rotate(30deg) !important; opacity: 0; }
        .fade-in { animation: fadeIn 0.6s ease-out forwards; opacity: 0; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        
        .trait-pill { transition: all 0.2s ease; }
        .trait-pill:active { transform: scale(0.95); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
        import { getFirestore, collection, addDoc, serverTimestamp, query, onSnapshot, getDocs, deleteDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        // --- KONFIGURACJA ---
        const firebaseConfig = {
            apiKey: "AIzaSyBbqbrD-VJgLQw9HtXgXE6hccQNBfE7OhM",
            authDomain: "zajecia6.firebaseapp.com",
            projectId: "zajecia6",
            storageBucket: "zajecia6.firebasestorage.app",
            messagingSenderId: "464023535230",
            appId: "1:464023535230:web:c147bde7dddd020d0d222f"
        };

        const COLLECTION_NAME = 'workshop_v5_final';
        const ADMIN_PASSWORD = "2000";

        // --- DANE: PULA CECH ---
        const TRAITS_POOL = [
            "Ambitny/a", "Spontaniczny/a", "Domator/ka", "Wra偶liwy/a", 
            "Zorganizowany/a", "Imprezowy/a", "Szczery/a", "Opiekuczy/a",
            "Analityczny/a", "Kreatywny/a"
        ];

        // --- DANE: ARCHETYPY Z LOKALNYMI ZDJCIAMI (Folder spo_7) ---
        // Schemat: x.y.png -> x=numer warunku, y=pe (1=M, 2=K)
        const ARCHETYPES_DB = {
            similarity_twin: { // Warunek 1
                male: { name: "Alex", age: 24, img: "./spo_7/1.1.png", desc: "Chyba nadajemy na tych samych falach. Lubi spdza czas w podobny spos贸b i mam zbli偶one podejcie do 偶ycia." },
                female: { name: "Ola", age: 24, img: "./spo_7/1.2.png", desc: "Chyba nadajemy na tych samych falach. Lubi spdza czas w podobny spos贸b i mam zbli偶one podejcie do 偶ycia." }
            },
            similarity_opposite: { // Warunek 2
                male: { name: "Maks", age: 26, img: "./spo_7/2.1.png", desc: "Mam sw贸j wasny wiat i rzadko zmieniam zdanie. Szukam kogo, kto zaakceptuje moj inno." },
                female: { name: "Maja", age: 26, img: "./spo_7/2.2.png", desc: "Mam sw贸j wasny wiat i rzadko zmieniam zdanie. Szukam kogo, kto zaakceptuje moj inno." }
            },
            warmth: { // Warunek 3
                male: { name: "Tomek", age: 25, img: "./spo_7/3.1.png", desc: "Zawsze pamita o urodzinach. Czsto gubi klucze, ale nadrabia umiechem i dobrym sercem.", traits: ["Pomocny", "Wesoy", "Uczuciowy"] },
                female: { name: "Ania", age: 25, img: "./spo_7/3.2.png", desc: "Zawsze pamita o urodzinach. Czsto gubi klucze, ale nadrabia umiechem i dobrym sercem.", traits: ["Pomocna", "Wesoa", "Uczuciowa"] }
            },
            competence: { // Warunek 4
                male: { name: "Piotr", age: 27, img: "./spo_7/4.1.png", desc: "Wymaga perfekcji od siebie i innych. Nie lubi marnowa czasu na gupoty. Skuteczno to jego drugie imi.", traits: ["Perfekcyjny", "Stanowczy", "Logiczny"] },
                female: { name: "Karolina", age: 27, img: "./spo_7/4.2.png", desc: "Wymaga perfekcji od siebie i innych. Nie lubi marnowa czasu na plotki. Skuteczno to jej drugie imi.", traits: ["Perfekcyjna", "Stanowcza", "Logiczna"] }
            },
            halo: { // Warunek 5
                male: { name: "Filip", age: 23, img: "./spo_7/5.1.png", desc: "Lubi dobr kaw i muzyk na 偶ywo. W wolnym czasie biega.", traits: ["Aktywny", "Kulturalny", "Zadbany"] },
                female: { name: "Julia", age: 23, img: "./spo_7/5.2.png", desc: "Lubi dobr kaw i muzyk na 偶ywo. W wolnym czasie biega.", traits: ["Aktywna", "Kulturalna", "Zadbana"] }
            },
            aversive: { // Warunek 6
                male: { name: "Patryk", age: 27, img: "./spo_7/6.1.png", desc: "Irytuj go ludzie, kt贸rzy wolno myl. Ostatnie trzy projekty zawali, bo szef si na niego uwzi.", traits: ["Roszczeniowy", "Krytyczny", "Nerwowy"] },
                female: { name: "Natalia", age: 27, img: "./spo_7/6.2.png", desc: "Irytuj j ludzie, kt贸rzy wolno myl. Ostatnie trzy projekty zawalia, bo szefowa si na ni uwzia.", traits: ["Roszczeniowa", "Krytyczna", "Nerwowa"] }
            }
        };

        // --- DASHBOARD (WYNIKI) ---
        function Dashboard({ dbInstance, localUserVotes }) {
            const [data, setData] = React.useState([]);
            const chartRef = React.useRef(null);

            React.useEffect(() => {
                const unsubscribe = onSnapshot(query(collection(dbInstance, COLLECTION_NAME)), (snap) => {
                    setData(snap.docs.map(d => d.data()));
                });
                return () => unsubscribe();
            }, [dbInstance]);

            React.useEffect(() => {
                if (!document.getElementById('mainChart') || data.length === 0) return;

                const categories = [
                    { key: 'similarity_twin', label: 'Bli藕niak (Podobny)' },
                    { key: 'similarity_opposite', label: 'Obcy (R贸偶ny)' },
                    { key: 'warmth', label: 'Ciepy' },
                    { key: 'competence', label: 'Sprawczy' },
                    { key: 'halo', label: 'Aureola (Atrakcyjny)' },
                    { key: 'aversive', label: 'Awersyjny' }
                ];

                const stats = categories.map(cat => {
                    const profileVotes = data.filter(d => d.archetype === cat.key);
                    const socialVotes = profileVotes.filter(d => d.context === 'social');
                    const workVotes = profileVotes.filter(d => d.context === 'work');
                    
                    return {
                        key: cat.key,
                        label: cat.label,
                        social: socialVotes.length ? Math.round((socialVotes.filter(v => v.vote).length / socialVotes.length) * 100) : 0,
                        work: workVotes.length ? Math.round((workVotes.filter(v => v.vote).length / workVotes.length) * 100) : 0
                    };
                });

                if (chartRef.current) chartRef.current.destroy();

                chartRef.current = new Chart(document.getElementById('mainChart'), {
                    type: 'bar',
                    data: {
                        labels: stats.map(s => s.label),
                        datasets: [
                            {
                                label: 'Randka (% Grupy)',
                                data: stats.map(s => s.social),
                                backgroundColor: 'rgba(236, 72, 153, 0.7)',
                                borderColor: 'rgba(236, 72, 153, 1)',
                                borderWidth: 1,
                                borderRadius: 4
                            },
                            {
                                label: 'Praca (% Grupy)',
                                data: stats.map(s => s.work),
                                backgroundColor: 'rgba(37, 99, 235, 0.7)',
                                borderColor: 'rgba(37, 99, 235, 1)',
                                borderWidth: 1,
                                borderRadius: 4
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: { y: { beginAtZero: true, max: 100 } },
                        plugins: {
                            legend: { position: 'top' }
                        }
                    }
                });
            }, [data]);

            const handleClear = async () => {
                if(prompt("Haso:") !== ADMIN_PASSWORD) return;
                if(!confirm("Usun WSZYSTKIE dane grupy?")) return;
                const snap = await getDocs(collection(dbInstance, COLLECTION_NAME));
                snap.forEach(d => deleteDoc(d.ref));
            }

            const getUserResult = (archetype) => {
                if (!localUserVotes) return null;
                const socialVote = localUserVotes.find(v => v.archetype === archetype && v.context === 'social')?.vote;
                const workVote = localUserVotes.find(v => v.archetype === archetype && v.context === 'work')?.vote;
                return { socialVote, workVote };
            };

            const categories = [
                { key: 'similarity_twin', label: 'Bli藕niak', desc: 'Podobiestwo' },
                { key: 'similarity_opposite', label: 'Obcy', desc: 'R贸偶nice' },
                { key: 'warmth', label: 'Ciepy', desc: 'Lubienie' },
                { key: 'competence', label: 'Sprawczy', desc: 'Respekt' },
                { key: 'halo', label: 'Aureola', desc: 'Wygld' },
                { key: 'aversive', label: 'Negatywny', desc: 'Awersja' }
            ];

            return (
                <div className="max-w-6xl mx-auto p-4 min-h-screen pb-20">
                    <div className="flex justify-between items-center mb-6">
                        <h2 className="text-2xl font-bold text-gray-800">Wyniki Grupy ({data.length > 0 ? Math.round(data.length / 12) : 0} os贸b)</h2>
                        <button onClick={handleClear} className="text-red-400 text-xs hover:text-red-600 border border-red-200 px-2 py-1 rounded">Reset</button>
                    </div>
                    
                    <div className="bg-white p-4 rounded-2xl shadow-lg mb-8 h-80 border border-gray-100">
                        <canvas id="mainChart"></canvas>
                    </div>

                    {localUserVotes.length > 0 && (
                        <div className="mb-8 fade-in">
                            <h3 className="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                                <i className="fa-solid fa-user-check text-blue-600"></i> Twoje Decyzje
                            </h3>
                            <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3">
                                {categories.map(cat => {
                                    const res = getUserResult(cat.key);
                                    if (!res) return null;
                                    return (
                                        <div key={cat.key} className="bg-white p-3 rounded-xl shadow-sm border border-gray-200 flex flex-col items-center text-center">
                                            <div className="text-xs text-gray-400 font-bold uppercase mb-1">{cat.label}</div>
                                            <div className="flex gap-4 mb-2">
                                                <div className="flex flex-col items-center">
                                                    <span className="text-[10px] text-pink-500 font-bold">Randka</span>
                                                    {res.socialVote 
                                                        ? <i className="fa-solid fa-heart text-pink-500 text-xl"></i> 
                                                        : <i className="fa-solid fa-xmark text-gray-300 text-xl"></i>}
                                                </div>
                                                <div className="flex flex-col items-center">
                                                    <span className="text-[10px] text-blue-600 font-bold">Praca</span>
                                                    {res.workVote 
                                                        ? <i className="fa-solid fa-briefcase text-blue-600 text-xl"></i> 
                                                        : <i className="fa-solid fa-xmark text-gray-300 text-xl"></i>}
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    )}

                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600">
                        <div className="bg-pink-50 p-4 rounded-xl border border-pink-100">
                            <strong className="text-pink-700 block mb-1">Hipoteza Podobiestwa</strong>
                            Czy "Bli藕niak" ma wysoki supek r贸偶owy? Jeli tak, grupa potwierdza zasad: lubimy tych, kt贸rzy s jak my.
                        </div>
                        <div className="bg-purple-50 p-4 rounded-xl border border-purple-100">
                            <strong className="text-purple-700 block mb-1">Efekt Aureoli</strong>
                            Jeli "Aureola" (osoba atrakcyjna) ma wysokie supki w Pracy (niebieski), to znaczy, 偶e uroda wpyna na ocen kompetencji.
                        </div>
                        <div className="bg-blue-50 p-4 rounded-xl border border-blue-100">
                            <strong className="text-blue-700 block mb-1">Ciepo vs Sprawczo</strong>
                            Ciepy powinien wygrywa Randk. Sprawczy powinien wygrywa Prac. Czy dane to potwierdzaj?
                        </div>
                    </div>
                </div>
            );
        }

        const PreferenceSelector = ({ onSelect, onAdmin }) => {
            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-6 bg-gradient-to-br from-pink-500 to-purple-600 text-white fade-in text-center relative">
                    <h1 className="text-4xl font-bold mb-2">Kogo szukasz?</h1>
                    <p className="mb-8 text-pink-100 opacity-90">Wybierz, aby rozpocz eksperyment.</p>
                    <div className="flex flex-col gap-4 w-full max-w-xs mb-12">
                        <button onClick={() => onSelect('male')} className="p-4 bg-white/10 hover:bg-white/20 rounded-xl border border-white/20 transition flex items-center justify-center gap-3 text-lg font-semibold"><i className="fa-solid fa-mars text-2xl"></i> M偶czyzn</button>
                        <button onClick={() => onSelect('female')} className="p-4 bg-white/10 hover:bg-white/20 rounded-xl border border-white/20 transition flex items-center justify-center gap-3 text-lg font-semibold"><i className="fa-solid fa-venus text-2xl"></i> Kobiet</button>
                        <button onClick={() => onSelect('both')} className="p-4 bg-white/10 hover:bg-white/20 rounded-xl border border-white/20 transition flex items-center justify-center gap-3 text-lg font-semibold"><i className="fa-solid fa-venus-mars text-2xl"></i> Wszystkich</button>
                    </div>
                    <button onClick={onAdmin} className="absolute bottom-6 text-xs text-white/30 hover:text-white/80 transition uppercase tracking-widest">Panel Admina</button>
                </div>
            )
        }

        const TraitSelector = ({ onConfirm }) => {
            const [selected, setSelected] = React.useState([]);
            const toggleTrait = (trait) => {
                if (selected.includes(trait)) {
                    setSelected(selected.filter(t => t !== trait));
                } else {
                    if (selected.length < 3) setSelected([...selected, trait]);
                }
            };
            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-6 bg-gradient-to-br from-indigo-500 to-blue-600 text-white fade-in text-center">
                    <h1 className="text-3xl font-bold mb-2">Jaki/Jaka jeste?</h1>
                    <p className="mb-8 text-indigo-100">Wybierz 3 cechy, kt贸re najlepiej Ci opisuj.</p>
                    <div className="grid grid-cols-2 gap-3 w-full max-w-md mb-8">
                        {TRAITS_POOL.map(trait => (
                            <button key={trait} onClick={() => toggleTrait(trait)} className={`p-3 rounded-xl font-medium transition-all text-sm trait-pill ${selected.includes(trait) ? 'bg-white text-indigo-600 shadow-lg scale-105 border-2 border-white font-bold' : 'bg-white/10 text-white hover:bg-white/20 border border-transparent'}`}>{trait}</button>
                        ))}
                    </div>
                    <button disabled={selected.length !== 3} onClick={() => onConfirm(selected)} className={`px-10 py-3 rounded-full font-bold text-lg shadow-xl transition-all ${selected.length === 3 ? 'bg-green-400 text-green-900 hover:scale-105 hover:bg-green-300' : 'bg-gray-500 text-gray-300 opacity-50 cursor-not-allowed'}`}>{selected.length === 3 ? "Dalej" : `Wybierz jeszcze ${3 - selected.length}`}</button>
                </div>
            );
        };

        const SwipeCard = ({ profile, onVote, contextType }) => {
            const [animClass, setAnimClass] = React.useState('fade-in');
            const isSocial = contextType === 'social';
            const handleDecision = (liked) => {
                setAnimClass(liked ? 'slide-out-right' : 'slide-out-left');
                setTimeout(() => { onVote(liked); setAnimClass('fade-in'); }, 300);
            };
            return (
                <div className="flex flex-col items-center justify-center w-full max-w-sm mx-auto relative px-4 py-2">
                    <div className={`swipe-card bg-white rounded-3xl shadow-xl overflow-hidden w-full h-[600px] flex flex-col relative border-2 ${animClass} ${isSocial ? 'border-pink-200' : 'border-blue-200'}`}>
                        <div className="h-[55%] relative bg-gray-200 shrink-0">
                            <img src={profile.img} className="w-full h-full object-cover" alt={profile.name} 
                                onError={(e) => { e.target.src='https://placehold.co/500x500/png?text=Brak+Zdjecia'; }} // Fallback
                            />
                            <div className="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/80 via-black/30 to-transparent p-5 pt-16"><h3 className="text-white text-3xl font-bold drop-shadow-md">{profile.name}, {profile.age}</h3></div>
                            <div className={`absolute top-4 right-4 px-3 py-1 rounded-full text-xs font-bold text-white shadow-md backdrop-blur-sm ${isSocial ? 'bg-pink-500/90' : 'bg-blue-600/90'}`}>{isSocial ? 'わ RANDKA' : ' PRACA'}</div>
                        </div>
                        <div className="p-6 flex-1 bg-white overflow-y-auto scrollbar-hide">
                            <div className="flex flex-wrap gap-2 mb-4">{profile.traits && profile.traits.map(t => (<span key={t} className="px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-xs font-bold uppercase tracking-wide">{t}</span>))}</div>
                            <p className="text-gray-700 leading-relaxed text-lg font-medium">{profile.desc}</p>
                        </div>
                        <div className="p-4 flex justify-center gap-8 bg-white shrink-0 pb-8">
                            <button onClick={() => handleDecision(false)} className="group w-16 h-16 rounded-full border-2 border-red-100 text-red-400 text-2xl hover:bg-red-500 hover:text-white hover:border-red-500 transition shadow-md flex items-center justify-center"><i className="fa-solid fa-xmark transform group-hover:scale-110 transition"></i></button>
                            <button onClick={() => handleDecision(true)} className={`group w-16 h-16 rounded-full border-2 text-2xl hover:text-white transition shadow-md flex items-center justify-center ${isSocial ? 'border-pink-100 text-pink-500 hover:bg-pink-500 hover:border-pink-500' : 'border-blue-100 text-blue-500 hover:bg-blue-600 hover:border-blue-600'}`}><i className={`fa-solid ${isSocial ? 'fa-heart' : 'fa-check'} transform group-hover:scale-110 transition`}></i></button>
                        </div>
                    </div>
                </div>
            );
        };

        function App() {
            const [phase, setPhase] = React.useState('preference');
            const [preference, setPreference] = React.useState(null);
            const [activeProfiles, setActiveProfiles] = React.useState([]);
            const [currentIndex, setCurrentIndex] = React.useState(0);
            const [voteQueue, setVoteQueue] = React.useState([]);
            const [localUserVotes, setLocalUserVotes] = React.useState([]);
            const [dbInstance, setDbInstance] = React.useState(null);

            React.useEffect(() => {
                const app = initializeApp(firebaseConfig);
                signInAnonymously(getAuth(app));
                setDbInstance(getFirestore(app));
            }, []);

            const handlePreferenceSelect = (pref) => {
                setPreference(pref);
                setPhase('traits');
            }

            const handleAdminLogin = () => {
                const pass = prompt("Podaj haso administratora:");
                if (pass === ADMIN_PASSWORD) {
                    setPhase('dashboard');
                } else if (pass) {
                    alert("Bdne haso");
                }
            }

            const handleTraitsConfirmed = (selectedTraits) => {
                const unselectedTraits = TRAITS_POOL.filter(t => !selectedTraits.includes(t));
                const oppositeTraits = unselectedTraits.sort(() => 0.5 - Math.random()).slice(0, 3);
                const getProfileData = (archetypeKey) => {
                    const archData = ARCHETYPES_DB[archetypeKey];
                    if (preference === 'male') return archData.male;
                    if (preference === 'female') return archData.female;
                    return Math.random() > 0.5 ? archData.male : archData.female;
                }
                const archetypeKeys = ['similarity_twin', 'similarity_opposite', 'warmth', 'competence', 'halo', 'aversive'];
                const profiles = archetypeKeys.map((key, index) => {
                    const baseData = getProfileData(key);
                    let finalTraits = baseData.traits;
                    if (key === 'similarity_twin') finalTraits = selectedTraits;
                    if (key === 'similarity_opposite') finalTraits = oppositeTraits;
                    return { id: index, archetype: key, name: baseData.name, age: baseData.age, img: baseData.img, desc: baseData.desc, traits: finalTraits };
                });
                setActiveProfiles(profiles.sort(() => 0.5 - Math.random()));
                setPhase('social');
            };

            const recordVote = (liked, context) => {
                const currentProfile = activeProfiles[currentIndex];
                const voteData = { archetype: currentProfile.archetype, vote: liked, context: context, targetGender: preference };
                setVoteQueue([...voteQueue, voteData]);
                setLocalUserVotes(prev => [...prev, voteData]);
                if (currentIndex < activeProfiles.length - 1) {
                    setCurrentIndex(prev => prev + 1);
                } else {
                    if (context === 'social') setPhase('switch');
                    else submitVotes([...voteQueue, voteData]);
                }
            };

            const startWorkPhase = () => { setCurrentIndex(0); setPhase('work'); };
            const submitVotes = async (allVotes) => {
                setPhase('saving');
                for (let v of allVotes) await addDoc(collection(dbInstance, COLLECTION_NAME), { ...v, timestamp: serverTimestamp() });
                setPhase('dashboard');
            };

            if (phase === 'preference') return <PreferenceSelector onSelect={handlePreferenceSelect} onAdmin={handleAdminLogin} />;
            if (phase === 'traits') return <TraitSelector onConfirm={handleTraitsConfirmed} />;
            if (phase === 'social') return <div className="min-h-screen bg-slate-100 flex flex-col pt-2"><SwipeCard profile={activeProfiles[currentIndex]} onVote={(liked) => recordVote(liked, 'social')} contextType="social" /></div>;
            if (phase === 'switch') return (
                <div className="min-h-screen flex flex-col items-center justify-center bg-slate-900 text-white text-center p-6 fade-in">
                    <div className="text-6xl mb-6 text-yellow-400"><i className="fa-solid fa-briefcase"></i></div>
                    <h2 className="text-3xl font-bold mb-4">Zmiana Kontekstu</h2>
                    <p className="mb-8 text-gray-300 max-w-md mx-auto text-lg">Teraz jeste <strong>Szefem</strong>. Oce przydatno do pracy.</p>
                    <button onClick={startWorkPhase} className="bg-blue-600 px-10 py-3 rounded-full font-bold shadow-lg hover:bg-blue-500 transition transform hover:scale-105">Zatrudniam</button>
                </div>
            );
            if (phase === 'work') return <div className="min-h-screen bg-slate-200 flex flex-col pt-2"><SwipeCard profile={activeProfiles[currentIndex]} onVote={(liked) => recordVote(liked, 'work')} contextType="work" /></div>;
            if (phase === 'saving') return <div className="min-h-screen flex flex-col items-center justify-center bg-white"><div className="text-4xl text-blue-600 mb-4"><i className="fa-solid fa-circle-notch animate-spin"></i></div><p className="text-gray-500">Zapisywanie...</p></div>;
            if (phase === 'dashboard') return <Dashboard dbInstance={dbInstance} localUserVotes={localUserVotes} />;
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>